#!/usr/bin/env bash
set -euo pipefail

echo "Running IndexAccess development checks..."

# Load environment variables if .env exists
if [ -f .env ]; then
  echo "Loading .env..."
  set -a
  source .env
  set +a
fi

# Run setup
echo "Running setup..."
./bin/setup

# Run tests across all Rails versions
echo "Running tests across all Rails versions..."
bundle exec appraisal rake test

# Run linters  
echo "Running linters..."
bundle exec rubocop -A

echo "All checks passed!"
